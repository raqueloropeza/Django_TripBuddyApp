<!DOCTYPE html>
<html lang= "en">
    <head>
        <meta charset = "utf-8">
        <title>Dashboard</title>
        <meta name="viewport" content="width-device-width, initial-scale-1">
        {% load static %}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
    </head>
    <div class="container">
        <body>
            <div class= "row">
                <div class= "col-sm-6">
                    <h1 class= "jumbotron">Hello, {{this_user.first_name}}!</h1>
                </div>
                <div class= "col-sm-1">
                    <a class= "btn btn-primary" href="/logout">Logout</a>
                </div>
                <div class= "col-sm-2">
                    <a class= "btn btn-success" href="/trips/new">Create a new Trip!</a>
                </div>
            </div>
            <div class="row">
                <h1>Your Trips</h1>
            </div>
            <div class = "row">
                <table class= "table table-bordered table-striped">
                    <tr>
                        <th>Destination</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Plan</th>
                        <th>Actions</th>
                    </tr>
                    {% for trips in user_trips %}
                    <tr>
                        <td><a href="/trips/{{trips.id}}">{{trips.destination}}</a></td>
                        <td>{{trips.start_date}}</td>
                        <td>{{trips.end_date}}</td>
                        <td>{{trips.plan}}</td>
                        <td><a href="/trips/edit/{{trips.id}}">Edit</a>| <a href="/trips/delete/{{trips.id}}">Delete</a></td>
                    </tr>
                    {% endfor %}
                    {% for trips in joined_trips.all %}
                    <tr>
                        <td><a href="/trips/{{trips.id}}">{{trips.destination}}</a></td>
                        <td>{{trips.start_date}}</td>
                        <td>{{trips.end_date}}</td>
                        <td>{{trips.plan}}</td>
                        <td><a href="/join/{{trips.id}}">Cancel</a>|</td>
                    </tr>
                    {% endfor %}
                
                </table>
            </div>
            <div class = "row">
                <h2>Other People's Trips</h2>
                <table class= "table table-bordered table-striped">
                    <tr>
                        <th>Destination</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Plan</th>
                        <th>Want to Join?</th>
                        
                    </tr>
                    {% for trips in other_trips.all %}
                    <tr>
                        <td><a href="/trips/{{trips.id}}">{{trips.destination}}</a></td>
                        <td>{{trips.start_date}}</td>
                        <td>{{trips.end_date}}</td>
                        <td>{{trips.plan}}</td>
                        <td><a href="/join/{{trips.id}}">Join</a></td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </body>
    </div>
</html>